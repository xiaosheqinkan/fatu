<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>X 自动关注</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 50px;
      background-color: #f5f8fa;
      color: #14171a;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      max-width: 500px;
      margin: 0 auto;
    }
    h1 { color: #1da1f2; }
    .btn {
      background: #1da1f2;
      color: white;
      padding: 15px 25px;
      border-radius: 50px;
      text-decoration: none;
      display: inline-block;
      font-weight: bold;
      margin-top: 20px;
    }
    .note {
      margin-top: 20px;
      padding: 15px;
      background: #e8f5fe;
      border-radius: 10px;
      font-size: 14px;
      color: #657786;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>授权 X 账户</h1>
    <p>点击授权以关注@findom77230615</p>
    <button class="btn" id="authBtn">点击授权</button>
    <div id="status" class="note"></div>
  </div>

  <script>
    const authBtn = document.getElementById('authBtn');
    const status = document.getElementById('status');

    authBtn.addEventListener('click', async () => {
      status.innerHTML = '获取授权...';
      try {
        const res = await fetch('/api/auth-url');
        const { authUrl } = await res.json();
        window.location.href = authUrl;
      } catch (error) {
        status.innerHTML = '错误: 无法获取授权链接';
      }
    });

    if (window.location.pathname === '/success') {
      status.innerHTML = '授权成功！已关注@findom77230615';
    }
  </script>
</body>
</html>